helper-repack-iso-prepare-virtio() { local iso stable_url="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso" latest_url="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/latest-virtio/virtio-win.iso"; iso="$(get-iso-file-path "virtio-win-${2:+stable}.iso" 2>/dev/null || get-iso-file-path "virtio-win-latest.iso" 2>/dev/null)"; [[ -z "$iso" ]] && { local iso_store="$(get_iso_paths | head -n1)"; [[ -d "$iso_store" ]] || { echo "Error: No valid ISO storage path found."; return 1; }; wget -O "$iso_store/virtio-win-${2:+stable}.iso" "${2:+$stable_url}" || wget -O "$iso_store/virtio-win-latest.iso" "$latest_url" || { echo "Error: Failed to download VirtIO ISO."; return 1; }; iso="$iso_store/virtio-win-${2:+stable}.iso"; }; mkdir -p "$1"; mount -o loop "$iso" "$1" || { echo "Error: Failed to mount VirtIO ISO."; return 1; }; }