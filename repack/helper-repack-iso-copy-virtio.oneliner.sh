helper-repack-iso-copy-virtio() { virtio_mount="${virtio_mount:-$1}"; virtio_dest="${virtio_dest:-$2}"; virtio_version="${virtio_version:-${3:-w10}}"; virtio_arch="${virtio_arch:-${4:-amd64}}"; virtio_drivers="${virtio_drivers:-viofs vioserial viorng qxldod viogpudo NetKVM pvpanic vioinput fwcfg Balloon viostor sriov vioscsi qemupciserial viomem}"; [[ -z "$virtio_mount" || -z "$virtio_dest" ]] && { echo "Error: Missing required arguments."; return 1; }; [[ ! -d "$virtio_mount" ]] && { echo "Error: VirtIO ISO mount point '$virtio_mount' does not exist."; return 1; }; mkdir -p "$virtio_dest"; echo "Copying VirtIO drivers from '$virtio_mount' (version: $virtio_version, arch: $virtio_arch) to '$virtio_dest'..."; for driver in $virtio_drivers; do src_path="$virtio_mount/$driver/$virtio_version/$virtio_arch"; dest_path="$virtio_dest/$driver"; [[ -d "$src_path" ]] && { mkdir -p "$dest_path"; cp -a "$src_path/"* "$dest_path/"; echo "✅ Copied: $src_path → $dest_path"; } || echo "⚠️ Warning: Driver '$driver' not found in '$src_path'. Skipping..."; done; echo "VirtIO driver copy complete."; }