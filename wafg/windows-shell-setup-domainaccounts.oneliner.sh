windows-shell-setup-domainaccounts() { local lists=() current_args=(); while [[ $# -gt 0 ]]; do case "$1" in addlist) [[ ${#current_args[@]} -gt 0 ]] && lists+=("${current_args[*]}"); current_args=();; *) current_args+=("$1");; esac; shift; done; [[ ${#current_args[@]} -gt 0 ]] && lists+=("${current_args[*]}"); [[ ${#lists[@]} -eq 0 ]] && return; echo -e "\t\t\t<DomainAccounts>"; for list in "${lists[@]}"; do windows-shell-setup-domainaccountslist $list; done; echo -e "\t\t\t</DomainAccounts>"; }