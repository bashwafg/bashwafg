windows-shell-setup-logoncommands(){ WINDOWS_SHELL_SETUP_ORDER=1; local args=() has_commands=false current_command=() index=0; [[ -n "${logoncommandarr_ubound}" && "${logoncommandarr_0_commandline+set}" ]] && has_commands=true; while [[ $# -gt 0 ]]; do args+=("$1"); shift; done; [[ ${#args[@]} -eq 0 && -z "${logoncommandarr_ubound}" ]] && return; echo -e "\t\t<LogonCommands>"; for arg in "${args[@]}" "addcommand"; do [[ "$arg" == "addcommand" && ${#current_command[@]} -gt 0 ]] && { windows-shell-setup-asynchronouscommand "${current_command[@]}"; current_command=(); has_commands=true; } || current_command+=("$arg"); done; [[ -n "${logoncommandarr_ubound}" ]] && for ((index=0; index<logoncommandarr_ubound; index++)); do eval "windows-shell-setup-asynchronouscommand \"\$index\""; done; echo -e "\t\t</LogonCommands>"; }